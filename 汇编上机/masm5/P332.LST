Microsoft (R) Macro Assembler Version 5.00                  11/23/4                                                             Page     1-1


				;p332.asm,除数为0的软件中断（类型0）处理程序。 
				; 
				; 
				;**********************************************
				****** 
					.model	small 
				; 
				;----------------------------------------------
				----- 
				; 
 0400					.stack 
				; 
				;----------------------------------------------
				----- 
				; 
 0000					.code 
				; 
 0000  8D 16 0037 R		start:	lea	dx,zdiv 
 0004  B8 ---- R			mov	ax,seg zdiv 
 0007  8E D8				mov	ds,ax 
 0009  B0 00				mov	al,0 
 000B  B4 25				mov	ah,25h 
 000D  CD 21				int	21h	; 
				; 
 000F  B8 ---- R		 	mov	ax,@code 
 0012  8E D8				mov	ds,ax 
 0014  BA 0075 R			mov	dx,offset ok_msg 
 0017  B4 09				mov	ah,9 
 0019  CD 21				int	21h	; 
				; 
 001B  B8 0001				mov	ax,1 
 001E  B2 00				mov	dl,0 
 0020  F6 F2				div	dl	; 
				; 
 0022  B4 02				mov	ah,2 
 0024  B2 23				mov	dl,'#' 
 0026  CD 21				int	21h 
				; 
 0028  B4 31				mov	ah,31h 
 002A  B0 00				mov	al,0 
 002C  BA 0024 90			mov	dx,((proglen+15)/16)+16 
 0030  CD 21				int	21h	; 
				; 
 0032  B8 4C00				mov	ax,4c00h 
 0035  CD 21				int 	21h 
				; 
				;----------------------------------------------
				------ 
				;过程名：zdiv 
				;功能：除数为0中断处理子程序。 
				; 
				; 
 0037				zdiv	proc	far 
 0037  50				push	ax 
Microsoft (R) Macro Assembler Version 5.00                  11/23/4                                                             Page     1-2


 0038  53				push	bx 
 0039  51				push	cx 
 003A  52				push	dx 
 003B  56				push	si 
 003C  57				push	di 
 003D  55				push 	bp 
 003E  1E				push	ds 
 003F  06				push 	es 
 0040  FB				sti 
				; 
 0041  B8 ---- R		prtwarn:mov	ax,@code 
 0044  8E D8				mov	ds,ax 
				; 
 0046  BA 009A R			mov	dx,offset warnmsg 
 0049  B4 09				mov	ah,9 
 004B  CD 21				int	21h 
				; 
 004D  B4 01			input:	mov	ah,1 
 004F  CD 21				int	21h 
 0051  3C 63				cmp	al,'c' 
 0053  74 09				je	exit 
				; 
 0055  BA 00CB R			mov	dx,offset beep 
 0058  B4 09				mov	ah,9 
 005A  CD 21				int 	21h 
 005C  EB E3				jmp	prtwarn 
				; 
 005E  B8 4CFF			exit:	mov	ax,4cffh 
 0061  CD 21				int 	21h 
				; 
 0063  BA 0130 R		continu:mov	dx,offset crlf 
 0066  B4 09				mov	ah,9 
 0068  CD 21				int	21h 
 006A  FA				cli 
				; 
 006B  07				pop	es 
 006C  1F				pop	ds 
 006D  5D				pop	bp 
 006E  5F				pop	di 
 006F  5E				pop	si 
 0070  5A				pop	dx 
 0071  59				pop	cx 
 0072  5B				pop	bx 
 0073  58				pop	ax 
 0074  CF				iret 
 0075				zdiv	endp 
				; 
				;----------------------------------------------
				--- 
				; 
				;数据区。 
				; 
 0075  0D 0A 5A 65 72 6F 2D	ok_msg	db	0dh,0ah,'Zero-division Handler 
				installed!' 
Microsoft (R) Macro Assembler Version 5.00                  11/23/4                                                             Page     1-3


       64 69 76 69 73 69 6F	
       6E 20 48 61 6E 64 6C	
       65 72 20 69 6E 73 74	
       61 6C 6C 65 64 21	
 0097  0D 0A 24				db	0dh,0ah,'$' 
 009A  0D 0A 5A 65 72 6F 2D	warnmsg	db	0dh,0ah,'Zero-division detected
				,',07h 
       64 69 76 69 73 69 6F	
       6E 20 64 65 74 65 63	
       74 65 64 2C 07		
 00B4  43 6F 6E 74 69 6E 75		db	'Continue or Quit(c/q)?$' 
       65 20 6F 72 20 51 75	
       69 74 28 63 2F 71 29	
       3F 24			
 00CB  0064[			beep	db	100 dup(07h),'$' 
	   07			
			 ]	
       24			
 0130  0D 0A 24			crlf	db	0dh,0ah,'$' 
 = 0133				proglen	equ	$-start 
				; 
				;----------------------------------------------
				---- 
				;**********************************************
				******** 
 0133					end	start 
Microsoft (R) Macro Assembler Version 5.00                  11/23/4                                                             Symbols-1


Segments and Groups:

                N a m e         	Length	 Align	Combine Class

DGROUP . . . . . . . . . . . . .  	GROUP
  _DATA  . . . . . . . . . . . .  	0000	WORD	PUBLIC	'DATA'
  STACK  . . . . . . . . . . . .  	0400	PARA	STACK	'STACK'
_TEXT  . . . . . . . . . . . . .  	0133	WORD	PUBLIC	'CODE'

Symbols:            

                N a m e         	Type	 Value	 Attr

BEEP . . . . . . . . . . . . . .  	L BYTE	00CB	_TEXT	Length = 0064

CONTINU  . . . . . . . . . . . .  	L NEAR	0063	_TEXT
CRLF . . . . . . . . . . . . . .  	L BYTE	0130	_TEXT

EXIT . . . . . . . . . . . . . .  	L NEAR	005E	_TEXT

INPUT  . . . . . . . . . . . . .  	L NEAR	004D	_TEXT

OK_MSG . . . . . . . . . . . . .  	L BYTE	0075	_TEXT

PROGLEN  . . . . . . . . . . . .  	NUMBER	0133	
PRTWARN  . . . . . . . . . . . .  	L NEAR	0041	_TEXT

START  . . . . . . . . . . . . .  	L NEAR	0000	_TEXT

WARNMSG  . . . . . . . . . . . .  	L BYTE	009A	_TEXT

ZDIV . . . . . . . . . . . . . .  	F PROC	0037	_TEXT	Length = 003E

@CODE  . . . . . . . . . . . . .  	TEXT  _TEXT		
@CODESIZE  . . . . . . . . . . .  	TEXT  0		
@DATASIZE  . . . . . . . . . . .  	TEXT  0		
@FILENAME  . . . . . . . . . . .  	TEXT  p332		


    112 Source  Lines
    112 Total   Lines
     25 Symbols

  50172 + 450836 Bytes symbol space free

      0 Warning Errors
      0 Severe  Errors
