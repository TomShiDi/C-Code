Microsoft (R) Macro Assembler Version 5.00                  11/21/4                                                             Page     1-1


				;p244.asm,简单的信息检索系统。 
				; 
				; 
				;**********************************************
				* 
 0000				data	segment 
				; 
 0000  20 49 20 6C 69 6B 65	msg0	db	' I like my IBM-PC-------------
				--' 
       20 6D 79 20 49 42 4D	
       2D 50 43 2D 2D 2D 2D	
       2D 2D 2D 2D 2D 2D 2D	
       2D 2D 2D 2D		
 0020  20 38 30 38 38 20 70	msg1	db	' 8088 programming is fun------
				--' 
       72 6F 67 72 61 6D 6D	
       69 6E 67 20 69 73 20	
       66 75 6E 2D 2D 2D 2D	
       2D 2D 2D 2D		
 0040  20 54 69 6D 65 20 74	msg2	db	' Time to buy more dikettes----
				--' 
       6F 20 62 75 79 20 6D	
       6F 72 65 20 64 69 6B	
       65 74 74 65 73 2D 2D	
       2D 2D 2D 2D		
 0060  20 54 68 69 73 20 70	msg3	db	' This program work------------
				--' 
       72 6F 67 72 61 6D 20	
       77 6F 72 6B 2D 2D 2D	
       2D 2D 2D 2D 2D 2D 2D	
       2D 2D 2D 2D		
 0080  20 54 75 72 6E 20 6F	msg4	db	' Turn off that printer--------
				--' 
       66 66 20 74 68 61 74	
       20 70 72 69 6E 74 65	
       72 2D 2D 2D 2D 2D 2D	
       2D 2D 2D 2D		
 00A0  20 49 20 68 61 76 65	msg5	db	' I have more memory than you--
				--' 
       20 6D 6F 72 65 20 6D	
       65 6D 6F 72 79 20 74	
       68 61 6E 20 79 6F 75	
       2D 2D 2D 2D		
 00C0  20 54 68 65 20 50 53	msg6	db	' The PSP can be useful--------
				--' 
       50 20 63 61 6E 20 62	
       65 20 75 73 65 66 75	
       6C 2D 2D 2D 2D 2D 2D	
       2D 2D 2D 2D		
 00E0  20 42 41 53 49 43 20	msg7	db	' BASIC was easier than is-----
				--' 
       77 61 73 20 65 61 73	
       69 65 72 20 74 68 61	
       6E 20 69 73 2D 2D 2D	
Microsoft (R) Macro Assembler Version 5.00                  11/21/4                                                             Page     1-2


       2D 2D 2D 2D		
 0100  20 44 4F 53 20 69 73	msg8	db	' DOS is indispensable---------
				--' 
       20 69 6E 64 69 73 70	
       65 6E 73 61 62 6C 65	
       2D 2D 2D 2D 2D 2D 2D	
       2D 2D 2D 2D		
 0120  20 4C 61 73 74 20 6D	msg9	db	' Last message of the day------
				--' 
       65 73 73 61 67 65 20	
       6F 66 20 74 68 65 20	
       64 61 79 2D 2D 2D 2D	
       2D 2D 2D 2D		
				; 
 0140  20 45 72 72 6F 72 21	errmsg	db	' Error!!!invalid parameter!!!-
				--' 
       21 21 69 6E 76 61 6C	
       69 64 20 70 61 72 61	
       6D 65 74 65 72 21 21	
       21 2D 2D 2D		
				; 
 0160  20 00			strlen	db	32,0 
				; 
 0162				data	ends 
				;**********************************************
				** 
				; 
				;**********************************************
				** 
				; 
 0000				stack	segment 
 0000  0100[				db	256 dup(0) 
	   00			
			 ]	
				
 0100				tos	label	word 
 0100				stack	ends 
				; 
				;**********************************************
				** 
				; 
				;**********************************************
				** 
				; 
 0000				code	segment 
					assume	cs:code,ds:data,ss:stack 
 0000  B8 ---- R		start:	mov	ax,stack 
 0003  8E D0				mov	ss,ax 
 0005  BC 0100 R			mov	sp,offset tos 
				; 
 0008  B8 ---- R			mov	ax,data 
 000B  8E D8				mov 	ds,ax 
				; 
 000D  B4 01			begin:	mov	ah,1 
Microsoft (R) Macro Assembler Version 5.00                  11/21/4                                                             Page     1-3


 000F  CD 21				int 	21h 
 0011  2C 30				sub	al,'0' 
 0013  72 12				jc	error 
 0015  3C 09				cmp	al,9 
 0017  77 0E				ja	error 
				; 
 0019  BB 0000 R			mov	bx,offset msg0 
 001C  F6 26 0160 R			mul	strlen 
 0020  03 D8				add	bx,ax 
 0022  E8 0032 R			call	display 
 0025  EB E6				jmp	begin 
				; 
 0027  BB 0140 R		error:	mov	bx,offset errmsg 
 002A  E8 0032 R			call	display 
				; 
 002D  B8 4C00				mov	ax,4c00h 
 0030  CD 21				int	21h 
				; 
				; 
				;----------------------------------------------
				 
				;过程名：display 
				;功能：显示信息表中信息。 
				;入口参数：信息的起始地址在bx中。 
				;返回值：无。 
				; 
 0032				display	proc	near 
 0032  8B 0E 0160 R			mov	cx,word ptr strlen 
 0036  8A 17			disp1:	mov	dl,[bx] 
 0038  E8 0051 R			call	disp_ch 
 003B  43				inc	bx 
 003C  E2 F8				loop	disp1 
 003E  E8 0042 R			call	crlf 
 0041  C3				ret 
 0042				display	endp 
				; 
				;----------------------------------------------
				--- 
				; 
				;------------------------------------------- 
				;过程名：crlf 
				;功能：显示回车、换行。 
				;入口参数：无。 
				;返回值：无。 
				; 
 0042				crlf	proc	near 
 0042  51				push	cx 
 0043  B2 0D				mov	dl,0dh 
 0045  B4 02				mov	ah,2 
 0047  CD 21				int	21h 
 0049  B2 0A				mov	dl,0ah 
 004B  B4 02				mov	ah,2 
 004D  CD 21				int 	21h 
 004F  59				pop	cx 
Microsoft (R) Macro Assembler Version 5.00                  11/21/4                                                             Page     1-4


 0050  C3				ret 
 0051				crlf	endp 
				;------------------------------------------- 
				;==============================================
				==== 
				;过程名：disp_ch 
				;功能：显示一个字符。 
				;入口参数：要显示字符在dl中。 
				;返回值：无。 
				; 
 0051				disp_ch	proc	near 
 0051  B4 02				mov	ah,2 
 0053  CD 21				int 	21h 
 0055  C3				ret 
 0056				disp_ch	endp 
				; 
				;==============================================
				==== 
				; 
 0056				code	ends 
				;**********************************************
				**** 
					end	start 
Microsoft (R) Macro Assembler Version 5.00                  11/21/4                                                             Symbols-1


Segments and Groups:

                N a m e         	Length	 Align	Combine Class

CODE . . . . . . . . . . . . . .  	0056	PARA	NONE	
DATA . . . . . . . . . . . . . .  	0162	PARA	NONE	
STACK  . . . . . . . . . . . . .  	0100	PARA	NONE	

Symbols:            

                N a m e         	Type	 Value	 Attr

BEGIN  . . . . . . . . . . . . .  	L NEAR	000D	CODE

CRLF . . . . . . . . . . . . . .  	N PROC	0042	CODE	Length = 000F

DISP1  . . . . . . . . . . . . .  	L NEAR	0036	CODE
DISPLAY  . . . . . . . . . . . .  	N PROC	0032	CODE	Length = 0010
DISP_CH  . . . . . . . . . . . .  	N PROC	0051	CODE	Length = 0005

ERRMSG . . . . . . . . . . . . .  	L BYTE	0140	DATA
ERROR  . . . . . . . . . . . . .  	L NEAR	0027	CODE

MSG0 . . . . . . . . . . . . . .  	L BYTE	0000	DATA
MSG1 . . . . . . . . . . . . . .  	L BYTE	0020	DATA
MSG2 . . . . . . . . . . . . . .  	L BYTE	0040	DATA
MSG3 . . . . . . . . . . . . . .  	L BYTE	0060	DATA
MSG4 . . . . . . . . . . . . . .  	L BYTE	0080	DATA
MSG5 . . . . . . . . . . . . . .  	L BYTE	00A0	DATA
MSG6 . . . . . . . . . . . . . .  	L BYTE	00C0	DATA
MSG7 . . . . . . . . . . . . . .  	L BYTE	00E0	DATA
MSG8 . . . . . . . . . . . . . .  	L BYTE	0100	DATA
MSG9 . . . . . . . . . . . . . .  	L BYTE	0120	DATA

START  . . . . . . . . . . . . .  	L NEAR	0000	CODE
STRLEN . . . . . . . . . . . . .  	L BYTE	0160	DATA

TOS  . . . . . . . . . . . . . .  	L WORD	0100	STACK

@FILENAME  . . . . . . . . . . .  	TEXT  p244_n		


    117 Source  Lines
    117 Total   Lines
     25 Symbols

  50318 + 450690 Bytes symbol space free

      0 Warning Errors
      0 Severe  Errors
